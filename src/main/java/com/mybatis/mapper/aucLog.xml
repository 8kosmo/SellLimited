<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.aucLogMapper">
	<select id="aucLogList" parameterType="map" resultType="map">
		SELECT final_price 
		FROM BID_LOG
		WHERE bid_code = #{bid_code}
		ORDER BY R_NUM
	</select>
	
	<insert id="aucLogIns" parameterType="map">
		INSERT INTO BID_LOG (BID_CODE, bidder_id, final_price, r_num)
             VALUES (#{bid_code}, #{mem_id}, (SELECT NVL(MAX(final_price),0) FROM bid_log
        WHERE bid_code=#{bid_code})+#{increase_rate}, (SELECT NVL(MAX(r_num),0) FROM bid_log WHERE bid_code=#{bid_code})+1) 
	</insert>
	
 </mapper>