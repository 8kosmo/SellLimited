<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.aucLogMapper">
		<select id="auctionList" parameterType="map" resultType="map">
         SELECT BID_TITLE, auction_info.bid_code, photo_name, start_price, auct_startdate, auct_enddate, cntBid, fPrice, mem_id, product_detail, buynow_price
      ,sale_item.item_code,brand,model_name
      FROM sale_item, item_photo, auct_progress, auction_info,
         (SELECT bid_code, COUNT(r_num) cntBid, MAX(final_price) fPrice FROM bid_log
         GROUP BY bid_code) bid_log
      WHERE sale_item.item_code = item_photo.item_code
      AND auction_info.bid_code = auct_progress.bid_code
      AND auct_progress.bid_code = bid_log.bid_code
      AND AUCTION_INFO.ITEM_CODE = sale_item.item_code
      AND auct_progress.bid_code = #{bid_code}
   </select>
 </mapper>